<Page
    x:Class="Dependencies.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Dependencies"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

	<Page.Resources>
		<Style x:Name="RecentMenuItemStyle" TargetType="MenuFlyoutItem">
			<Setter Target="Template">
				<Setter.Value>
					<ControlTemplate TargetType="MenuFlyoutItem">
						<MenuFlyoutItem Text="{Binding HeaderTitle}" FontSize="12" Padding="{StaticResource MenuFlyoutItemThemePaddingNarrow}" Click="RecentItem_Click"/>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Page.Resources>

	<Grid AllowDrop="True" DragEnter="RootGrid_DragEnter" Drop="RootGrid_Drop">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>
		<MenuBar Padding="4,0,0,0">
			
			<MenuBar.Items>
				<MenuBarItem x:Name="FileMenu" Title="File" AccessKey="F">
					<MenuBarItem.Items>
						<MenuFlyoutItem x:Name="OpenItem" Text="Open" Click="OpenItem_Click" AccessKey="O">
							<MenuFlyoutItem.KeyboardAccelerators>
								<KeyboardAccelerator Modifiers="Control" Key="O"/>
							</MenuFlyoutItem.KeyboardAccelerators>
						</MenuFlyoutItem>
						<MenuFlyoutSubItem x:Name="RecentItems" Text="Recent files"/>
						<MenuFlyoutSeparator/>
						<MenuFlyoutItem x:Name="ExitItem" Text="Exit" Click="ExitItem_Click" AccessKey="X">
							<MenuFlyoutItem.KeyboardAccelerators>
								<KeyboardAccelerator Modifiers="Control" Key="Q"/>
							</MenuFlyoutItem.KeyboardAccelerators>
						</MenuFlyoutItem>
					</MenuBarItem.Items>
				</MenuBarItem>
				<MenuBarItem Title="View" AccessKey="V">
					<MenuBarItem.Items>
						<ToggleMenuFlyoutItem x:Name="FullPathItem" AccessKey="F" Text="Full Paths" IsChecked="{x:Bind FullPathSetting, Mode=TwoWay}">
							<ToggleMenuFlyoutItem.KeyboardAccelerators>
								<KeyboardAccelerator Modifiers="None" Key="F9"/>
							</ToggleMenuFlyoutItem.KeyboardAccelerators>
						</ToggleMenuFlyoutItem>
						<ToggleMenuFlyoutItem AccessKey="U" Text="Undecorate C++ Functions" IsChecked="{x:Bind UndecorateSetting, Mode=TwoWay }">
							<ToggleMenuFlyoutItem.KeyboardAccelerators>
								<KeyboardAccelerator Modifiers="None" Key="F10"/>
							</ToggleMenuFlyoutItem.KeyboardAccelerators>
						</ToggleMenuFlyoutItem>
						<MenuFlyoutSeparator/>
						<ToggleMenuFlyoutItem AccessKey="S" Text="Status Bar" IsChecked="{x:Bind ShowStatusBarSetting, Mode=TwoWay }"/>
					</MenuBarItem.Items>
				</MenuBarItem>
				<MenuBarItem Title="Options" AccessKey="O">
					<MenuBarItem.Items>
						<MenuFlyoutItem x:Name="UserSettingsItem" Text="Properties" AccessKey="P" Click="UserSettingsItem_Click"/>
					</MenuBarItem.Items>
				</MenuBarItem>

				<MenuBarItem Title="Help" AccessKey="H">
					<MenuBarItem.Items>
						<MenuFlyoutItem Text="About Dependencies" Click="AboutItem_Click"/>
					</MenuBarItem.Items>
				</MenuBarItem>
			</MenuBar.Items>

		</MenuBar>

		<Grid Grid.Row="1" Background="#FF5C8F88"/>

		<TabView x:Name="FileTabs" Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsAddTabButtonVisible="False" Padding="4,4,0,0" TabCloseRequested="FileTabs_TabCloseRequested" TabItemsChanged="FileTabs_TabItemsChanged" >
			<TabView.Resources>
				<ResourceDictionary>
					<ResourceDictionary.ThemeDictionaries>
						<ResourceDictionary x:Key="Default">
							<!-- Optimize appereance of non-active tabs -->
							<SolidColorBrush x:Key="TabViewItemHeaderBackground" Color="#40FFFFFF" />
							<SolidColorBrush x:Key="TabViewItemHeaderBackgroundPointerOver" Color="#80FFFFFF" />
							<SolidColorBrush x:Key="TabViewItemHeaderBackgroundPressed" Color="#EEEEEE" />
							<SolidColorBrush x:Key="TabViewItemBorderBrush" Color="#40FFFFFF" />
							<SolidColorBrush x:Key="TabViewItemHeaderForeground" Color="#9E000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderForegroundPointerOver" Color="#9E000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderForegroundPressed" Color="#E4000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderCloseButtonForeground" Color="#9E000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderCloseButtonForegroundPointerOver" Color="#9E000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderCloseButtonForegroundPressed" Color="#E4000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderPressedCloseButtonForeground" Color="#9E000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderPointerOverCloseButtonForeground" Color="#E4000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderCloseButtonBackgroundPressed" Color="#06000000" />
							<SolidColorBrush x:Key="TabViewItemHeaderCloseButtonBackgroundPointerOver" Color="#60FFFFFF" />
						</ResourceDictionary>
					</ResourceDictionary.ThemeDictionaries>
					<!--TODO: Remove when rendering issue fixed -->
					<CornerRadius x:Key="OverlayCornerRadius">0</CornerRadius>
				</ResourceDictionary>
				<!-- TODO Theme -->
				
			</TabView.Resources>
		</TabView>

		<Grid   Name="DefaultMessage"
                Grid.Row="1" 
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
              >
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="48"/>
				<ColumnDefinition Width="auto"/>
			</Grid.ColumnDefinitions>

			<Image Source="Assets/Square44x44Logo.png" Height="48" Width="48" Grid.Column="0"/>



			<TextBlock Grid.Column="2" 
                       TextWrapping="Wrap"
                       VerticalAlignment="Center"
                       Name="TextContent"
                       FontSize="18"
                       Margin="20 0 0 00"
                       >
                Analyze a new binary via "File -> Open" (Ctrl+O) <LineBreak/>
                or simply by dragging it into the application.
			</TextBlock>
		</Grid>

		<InfoBar x:Name="AppStatusBar" 
                   HorizontalContentAlignment="Stretch" 
                   VerticalContentAlignment="Bottom" 
                   Grid.Row="2" 
                   MinHeight="20" 
                   Margin="0" 
                   VerticalAlignment="Bottom" IsClosable="False" IsOpen="True" Height="24" IsIconVisible="False" CornerRadius="0" BorderThickness="0,1,0,0" Background="{ThemeResource LayerFillColorDefaultBrush}"
				   Visibility="{x:Bind ShowStatusBarSetting, Mode=OneWay}">
			<!-- Visibility="{Binding Source={x:Static properties:Settings.Default}, Path=ShowStatusBar, Mode=OneWay, Converter={StaticResource BooleanToVisibility}}" -->
			<InfoBar.Message>
				"Welcome to Dependencies !"
			</InfoBar.Message>
		</InfoBar>
	</Grid>
</Page>
